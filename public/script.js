(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _this=void 0;navigator.clipboard?(console.log("Support du presse papier"),document.querySelectorAll("[data-clipboard]").forEach(function(a){var b=document.createElement("button");b.innerHTML="Copier le lien de partage",a.parentNode.append(b),a.remove(),b.addEventListener("click",copyToClipboard.bind(_this,a,b))})):console.warn("Pas de support clippboard :(");function copyToClipboard(a,b){navigator.clipboard.writeText(a.getAttribute("data-clipboard")).then(function(){b.innerHTML="Lien copi\xE9 !",setTimeout(function(){return b.innerHTML="Copier le lien de partage"},2e3)})["catch"](function(a){return console.warn(a)})}

},{}],2:[function(require,module,exports){
"use strict";var itemsList=document.querySelector(".items");if(itemsList){var partyId=document.querySelector("[data-party-id]").getAttribute("data-party-id"),partyName=document.querySelector("[data-party-id]").textContent;fetch("http://bastiencalou.fr:3000/party/".concat(partyId)).then(function(a){a.json().then(function(a){var b=a.items,c=[];a.items.forEach(function(a){c.push(a._id)}),console.log("itemsIDS",c),setInterval(function(){fetch("http://bastiencalou.fr:3000/party/".concat(partyId)).then(function(a){a.json().then(function(a){var d=a.items,e=[],f=!1;// notify if new item
// notify if deleted item
d.forEach(function(a){e.push(a._id)}),d.forEach(function(a){-1===c.indexOf(a._id)&&(Notification&&"granted"===Notification.permission&&new Notification("Item ajout\xE9 \xE0 ".concat(partyName,"!"),{body:"".concat(a.user," a d\xE9cid\xE9 d'apporter : ").concat(a.name)}),f=!0)}),b.forEach(function(a){-1===e.indexOf(a._id)&&Notification&&("granted"===Notification.permission&&new Notification("Item supprim\xE9 de ".concat(partyName,"!"),{body:"".concat(a.user," n'apportera plus : ").concat(a.name)}),f=!0)}),f&&document.location.reload()})})},5e3)})})}else console.log("no item list");

},{}],3:[function(require,module,exports){
"use strict";Notification?(console.log("notification supported"),document.querySelectorAll("[data-notify]").forEach(function(a){a.addEventListener("click",function(){Notification.requestPermission().then(function(){document.querySelectorAll("[data-notify-item]").forEach(function(a){var b=a.getAttribute("data-notify-item"),c=a.getAttribute("data-notify-user");a.addEventListener("click",function(){"granted"===Notification.permission&&new Notification("Item supprim\xE9 !",{body:"".concat(c," n'apportera plus : ").concat(b)})})})})})})):console.log("notification not supported");

},{}],4:[function(require,module,exports){
"use strict";"undefined"!=typeof party&&(console.log("party",party),localStorage.setItem(location.href,party.name));

},{}],5:[function(require,module,exports){
"use strict";var _this=void 0;navigator.share?(console.log("Support du share"),document.querySelectorAll("[data-share-url]").forEach(function(a){var b=document.createElement("button");b.innerHTML="Partager",a.parentNode.append(b),b.addEventListener("click",share.bind(_this,a))})):console.warn("Pas de support du share :(");function share(a){navigator.share({title:a.getAttribute("data-share-title"),text:a.getAttribute("data-share-text"),url:a.getAttribute("data-share-url")})}

},{}]},{},[1,2,3,4,5]);
